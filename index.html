<!DOCTYPE html>
<html lang="en-US">
<!--you should put the language attribute inside the html tag-->

<head>
    <title>ROWAN MEDCRAFT</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/x-icon" href="assets/cap.ico" />
    <!--adds the little image at the top next to the title-->
</head>

<body>
    <h1>RowanMedcraft.org</h1>
    <hr />
    <p style="background-color: white">
        I'll work on this one day I promise I promise this is coming soon I promise I will have something here someday I
        promise please dont leave
    </p>
    <!--fish website link-->
    <a href="fish-website/fishhome"><img src="assets/fish.jpg" width="100" height="50"
            alt="fish website from high school" title="fish website I made in high school"
            style="position: absolute; top: 1.5%; left: 2%" /></a>
    <br />
    <a href="cipher-translation/ciphers">Cipher Translation Tool</a>
    <br />
    <a href="grade/finalgrade">Final Grade Calculator</a>
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <div id="creditCard">
        <label for="creditCard">Credit Card Information: </label>
        <br />
        <label for="creditCardNumber">Credit Card Number: </label>

        <!--autocomplete="cc-number" -->
        <input type="text" id="creditCardNumber" inputmode="numeric" maxlength="19" placeholder="xxxx xxxx xxxx xxxx"
            onpaste="return false" />
        <br />
        <label for="securityCode">Security Code: </label>
        <input type="text" id="securityCode" inputmode="numeric" maxlength="3" placeholder="xxx"
            onpaste="return false" />
        <br />
        <label for="expirationDate">Expiration Date: </label>
        <input type="date" id="expirationDate" name="expirationDate" autocomplete="cc-exp" />
        <br />
        <button id="submitCreditCard" onclick="submitCreditCard()">Go!</button>
        <br />
        <p id="creditError" style="color: red"></p>
    </div>

    <!-- <a href="dist/immersion.html">get immersed</a> -->
    <button style="background-color: red" class="anybutton" id="killRowanButton" onclick="killRowanMedcraft()">KILL
        ROWAN MEDCRAFT</button>
    <script>
        // credit card scripts
        const allowedDigits = "0123456789";
        document.getElementById("creditCardNumber").addEventListener("keydown", (evt) => {
            const text = evt.target.value; // text AFTER the keyboard input

            // adds dashes where there should be dashes in the string
            if (allowedDigits.includes(evt.key) && (text.length === 4 || text.length === 9 || text.length === 14)) {
                evt.target.value += "-";
            }
            // removes the dash when you remove the character before it
            if (evt.key === "Backspace" && text.at(text.length - 2) === "-") {
                evt.target.value = evt.target.value.substring(0, evt.target.value.length - 1);
            }
        });

        document.getElementById("creditCardNumber").onkeypress = function (evt) {
            var chr = String.fromCharCode(evt.which);
            if (allowedDigits.indexOf(chr) < 0) {
                return false;
            }
        };

        document.getElementById("securityCode").onkeypress = function (evt) {
            var chr = String.fromCharCode(evt.which);
            if (allowedDigits.indexOf(chr) < 0) {
                return false;
            }
        };

        function submitCreditCard() {
            const ccNumber = document.getElementById("creditCardNumber").value;
            const securityCode = document.getElementById("securityCode").value;
            const date = document.getElementById("expirationDate").value;

            if (date.length > 0 && Date.now() > Date.parse(document.getElementById("expirationDate").value)) {
                document.getElementById("creditError").innerHTML = "Invalid Date: Your Credit Card is Expired!";
            } else if (date.length === 0 || ccNumber.length < 19 || securityCode.length < 3) {
                document.getElementById("creditError").innerHTML = "Please finish all required fields";
            } else {
                // I am not taking your information I promise
                document.getElementById("creditCardNumber").value = "";
                document.getElementById("securityCode").value = "";
                document.getElementById("expirationDate").value = "";
                document.getElementById("creditError").innerHTML = "";
            }
        }

        // killing rowan scripts
        let rowanDead = false;
        const stab = new Audio("assets/rowan-stabbed.mp3");
        function killRowanMedcraft() {
            if (!rowanDead) {
                stab.play();
                document.body.style.backgroundImage = "url('assets/dead-rowan.jpg')";
                document.getElementById("killRowanButton").textContent = "REVIVE ROWAN MEDCRAFT";
            } else {
                document.body.style.backgroundImage = "url('assets/small.jpg')";
                document.getElementById("killRowanButton").textContent = "KILL ROWAN MEDCRAFT";
            }
            rowanDead = !rowanDead;
        }
    </script>
</body>

</html>